<ion-header [translucent]="true" class="home-header">
  <ion-toolbar class="custom-toolbar">
    <ion-title class="header-title">
      <div class="logo-section">
        <ion-icon name="leaf-outline" class="logo-icon"></ion-icon>
        <span>Toko Buah Segar</span>
      </div>
    </ion-title>
    <ion-buttons slot="end">
      <ion-button class="cart-button" (click)="goToCart()">
        <ion-icon name="cart-outline"></ion-icon>
        <ion-badge *ngIf="cartItemCount > 0" class="cart-badge">{{ cartItemCount }}</ion-badge>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="home-content">
  <!-- Search Bar -->
  <div class="search-section">
    <div class="search-bar">
      <ion-icon name="search-outline" class="search-icon"></ion-icon>
      <input type="text" placeholder="Cari buah segar..." [(ngModel)]="searchQuery" (input)="onSearch()">
    </div>
  </div>

  <!-- Banner Carousel -->
  <div class="banner-section">
    <div class="banner-carousel">
      <div class="banner-card" *ngFor="let banner of banners; let i = index" [class.active]="currentBannerIndex === i"
        [style.background]="banner.gradient">
        <div class="banner-content">
          <h2>{{ banner.title }}</h2>
          <p>{{ banner.subtitle }}</p>
          <button class="banner-btn">Beli Sekarang</button>
        </div>
        <div class="banner-image">
          <ion-icon [name]="banner.icon"></ion-icon>
        </div>
      </div>
    </div>
    <div class="banner-dots">
      <span *ngFor="let banner of banners; let i = index" [class.active]="currentBannerIndex === i"
        (click)="selectBanner(i)"></span>
    </div>
  </div>

  <!-- Categories -->
  <div class="section">
    <div class="section-header">
      <h3>Kategori</h3>
      <a (click)="viewAllCategories()">Lihat Semua</a>
    </div>
    <div class="categories-grid">
      <div class="category-card" *ngFor="let category of categories" (click)="selectCategory(category)">
        <div class="category-icon" [style.background]="category.color">
          <ion-icon [name]="category.icon"></ion-icon>
        </div>
        <p>{{ category.name }}</p>
      </div>
    </div>
  </div>

  <!-- Featured Products -->
  <div class="section">
    <div class="section-header">
      <h3>Produk Unggulan</h3>
      <a (click)="viewAllProducts()">Lihat Semua</a>
    </div>
    <div class="products-grid">
      <div class="product-card" *ngFor="let product of featuredProducts" (click)="viewProductDetail(product)">
        <div class="product-image">
          <img [src]="product.image" [alt]="product.name">
          <div class="discount-badge" *ngIf="product.discount">
            -{{ product.discount }}%
          </div>
        </div>
        <div class="product-info">
          <h4>{{ product.name }}</h4>
          <p class="product-desc">{{ product.description }}</p>
          <div class="product-price">
            <span class="current-price">Rp {{ product.price | number:'1.0-0' }}</span>
            <span class="original-price" *ngIf="product.originalPrice">Rp {{ product.originalPrice | number:'1.0-0'
              }}</span>
          </div>
          <div class="product-footer">
            <div class="rating">
              <ion-icon name="star" class="star-icon"></ion-icon>
              <span>{{ product.rating }}</span>
            </div>
            <button class="add-cart-btn" (click)="addToCart(product, $event)">
              <ion-icon name="add-outline"></ion-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- New Arrivals -->
  <div class="section">
    <div class="section-header">
      <h3>Buah Terbaru</h3>
      <a (click)="viewAllProducts()">Lihat Semua</a>
    </div>
    <div class="horizontal-scroll">
      <div class="product-card-small" *ngFor="let product of newArrivals" (click)="viewProductDetail(product)">
        <img [src]="product.image" [alt]="product.name">
        <h5>{{ product.name }}</h5>
        <p class="price">Rp {{ product.price | number:'1.0-0' }}</p>
        <button class="add-btn" (click)="addToCart(product, $event)">
          <ion-icon name="add"></ion-icon>
        </button>
      </div>
    </div>
  </div>

</ion-content>